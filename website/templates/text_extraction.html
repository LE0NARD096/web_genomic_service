{% extends "base.html" %}
{% block title %}Home page{% endblock %}
{% block content %}

<title>Download Text Form</title>
<script>
        function toggleFields() {
            var outputType = document.getElementById("id_output_type").value;
            var genomeFields = ["genomeFields"];
            var geneProteinFields = ["geneProteinFields"];

            if (outputType === "genome") {
                showFields(genomeFields);
                hideFields(geneProteinFields);
            } else if (outputType === "gene_protein") {
                showFields(geneProteinFields);
                hideFields(genomeFields);
            }
        }

        function showFields(fields) {
            for (var i = 0; i < fields.length; i++) {
                document.getElementById(fields[i]).style.display = "block";
            }
        }

        function hideFields(fields) {
            for (var i = 0; i < fields.length; i++) {
                document.getElementById(fields[i]).style.display = "none";
            }
        }
</script>

<div style="display: flex; justify-content: center; align-items: center; height: 70vh;">
    <form method="post" action="{% url 'text_extraction' %}" style="text-align: left;">
        <h2 class="text-center mb-4">Download </h2>
        {% csrf_token %}
        
        <!-- Output Type -->
        {{ form.output_type.label_tag }}<br>
        {{ form.output_type }}<br>
        
        <!-- Genome Fields -->
        <br>
        {{ form.chromosome.label_tag }}<br> 
        {{ form.chromosome }}<br>
        {{ form.species.label_tag }}<br>
        {{ form.species }}<br>

        <div id="genomeFields">
            {{ form.start_position.label_tag }}<br>
            {{ form.start_position }}<br>
            {{ form.end_position.label_tag }}<br>
            {{ form.end_position }}<br>
        </div>

        <!-- Gene/Protein Fields -->
        <div id="geneProteinFields">
            {{ form.gene.label_tag }} <br>
            {{ form.gene }}<br>
            {{ form.transcript.label_tag }} <br>
            {{ form.transcript }}<br>
            {{ form.function.label_tag }} <br>
            {{ form.function }}<br>
        </div>
        <br>
        <button type="submit" class="btn btn-primary" style="background-color: #7089b9; color: white;">Download</button>
    </form>
</div>

<script>
    toggleFields();
    document.getElementById("id_output_type").addEventListener("change", toggleFields);
</script>

{% endblock %}
